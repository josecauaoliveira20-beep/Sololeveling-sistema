<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SYSTEM: MILITARY CALISTHENICS</title>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #1a202c; /* Fundo escuro azulado */
            --panel-bg: #2d3748; /* Pain√©is mais claros */
            --neon: #00e5ff; /* Ciano Solo Leveling */
            --text-main: #ffffff;
            --text-muted: #a0aec0;
            --locked: #4a5568;
        }

        body {
            margin: 0;
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Roboto', sans-serif;
            overflow-x: hidden;
            padding-bottom: 70px; /* Espa√ßo pro menu inferior */
        }

        h1, h2, h3, .oswald { font-family: 'Oswald', sans-serif; text-transform: uppercase; }

        /* === HUD SUPERIOR (Igual √† imagem 1) === */
        .hud-container {
            background: rgba(26, 32, 44, 0.95);
            padding: 15px 10px;
            border-bottom: 2px solid var(--neon);
            position: sticky; top: 0; z-index: 100;
        }
        .hud-title {
            text-align: center; font-size: 16px; margin: 0 0 15px 0; letter-spacing: 1px;
        }
        .hud-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 10px;
        }
        .hud-box {
            background: #111827;
            border: 1px solid #374151;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            position: relative;
        }
        .hud-box-neon { border-color: var(--neon); box-shadow: 0 0 10px rgba(0, 229, 255, 0.1); }
        .hud-label { font-size: 10px; color: var(--text-muted); font-weight: bold; margin-bottom: 5px; }
        .hud-value { font-size: 18px; font-weight: bold; font-family: 'Oswald', sans-serif; }
        .hud-lvl { font-size: 12px; color: var(--neon); margin-top: 5px; }
        .mission-number { font-size: 45px; color: var(--neon); line-height: 1; font-family: 'Oswald', sans-serif; font-weight: bold; margin-top: 5px;}
        
        .xp-bar-container { width: 100%; background: #374151; height: 4px; border-radius: 2px; margin-top: 10px; position: relative; }
        .xp-bar-fill { height: 100%; background: var(--neon); width: 0%; border-radius: 2px; transition: 0.5s; }
        .xp-text { font-size: 8px; color: var(--text-muted); position: absolute; right: 0; top: -12px; }

        /* === TELAS (Abas) === */
        .screen { display: none; padding: 15px; animation: fadeIn 0.3s ease; }
        .screen.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* === CARDS DE TREINO (Igual √† imagem 2 - SOLDADO) === */
        .section-title { font-size: 18px; text-align: center; margin-bottom: 20px; letter-spacing: 2px; color: #e2e8f0; }
        .mission-card {
            background: var(--panel-bg);
            border: 2px solid var(--neon);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex; justify-content: space-between; align-items: center;
            cursor: pointer; transition: 0.2s;
        }
        .mission-card.locked { border-color: var(--locked); opacity: 0.7; pointer-events: none; }
        .m-info h3 { margin: 0; font-size: 16px; color: white; }
        .m-status { font-size: 10px; color: var(--neon); margin-top: 5px; font-weight: bold; }
        .locked .m-status { color: #f56565; }
        .m-icon { font-size: 30px; }

        /* === DEVOCIONAL (Igual √† imagem 3) === */
        .devo-card { background: var(--panel-bg); padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .devo-text { font-size: 12px; color: var(--text-muted); line-height: 1.6; margin-top: 10px; }
        .themes-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .theme-btn { background: #1f2937; border: 1px solid #4b5563; padding: 20px; border-radius: 8px; text-align: center; cursor: pointer; }
        .theme-btn:active { background: #374151; }
        .theme-icon { font-size: 24px; margin-bottom: 10px; color: var(--neon); }

        /* === MULTIM√çDIA (Igual √† imagem 4) === */
        .media-player { background: #111827; padding: 20px; border-radius: 8px; text-align: center; border: 1px solid #374151;}
        .album-art { width: 100px; height: 100px; background: #374151; border-radius: 8px; margin: 0 auto 15px auto; display: flex; align-items: center; justify-content: center; font-size: 40px;}
        .track-title { font-size: 16px; font-weight: bold; font-family: 'Oswald', sans-serif;}
        .track-time { font-size: 12px; color: var(--neon); margin: 10px 0; }
        .controls { display: flex; justify-content: center; gap: 20px; margin-top: 15px; }
        .ctrl-btn { background: none; border: none; color: var(--neon); font-size: 20px; cursor: pointer; }
        
        .upload-btn { background: var(--neon); color: black; border: none; padding: 10px; border-radius: 5px; font-weight: bold; width: 100%; margin-top: 20px; font-family: 'Oswald'; }
        input[type="file"] { display: none; }

        /* === B√çBLIA === */
        select { background: var(--panel-bg); color: white; border: 1px solid var(--neon); padding: 10px; font-family: 'Roboto'; width: 100%; margin-bottom: 10px; border-radius: 5px;}
        .bible-content { font-size: 14px; line-height: 1.8; color: #cbd5e1; margin-top: 15px; padding: 10px; background: #111827; border-radius: 5px;}

        /* === NAVEGA√á√ÉO INFERIOR === */
        .bottom-nav {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: #1a202c; border-top: 1px solid #2d3748;
            display: flex; justify-content: space-around; padding: 10px 0; z-index: 100;
        }
        .nav-item { text-align: center; color: var(--text-muted); font-size: 10px; cursor: pointer; flex: 1; }
        .nav-item.active { color: var(--neon); }
        .nav-icon { font-size: 20px; margin-bottom: 3px; display: block;}

        /* Bot√£o Aceler√¥metro */
        .btn-sensor { background: #2b6cb0; color: white; border: none; padding: 15px; width: 100%; border-radius: 5px; font-weight: bold; font-family: 'Oswald'; margin-top: 20px; }
    </style>
</head>
<body>

<div class="hud-container">
    <h2 class="hud-title">SYSTEM: MILITARY CALISTHENICS</h2>
    <div class="hud-grid">
        <div class="hud-box">
            <div class="hud-label">STATUS</div>
            <div class="hud-value" id="hud-rank">RANK E</div>
            <div class="hud-lvl">LEVEL <span id="hud-lvl-num" style="color:white">01</span></div>
            <div class="xp-bar-container">
                <div class="xp-text" id="hud-xp-txt">0%</div>
                <div class="xp-bar-fill" id="hud-xp-fill"></div>
            </div>
        </div>
        <div class="hud-box hud-box-neon">
            <div class="hud-label">MISSION</div>
            <div class="hud-value" id="hud-mission-name" style="font-size: 12px;">SELECIONE MISS√ÉO</div>
            <div class="mission-number" id="hud-reps">00</div>
        </div>
    </div>
</div>

<div id="tab-train" class="screen active">
    <h2 class="section-title oswald">SOLDADO</h2>

    <div class="mission-card" onclick="startMission('FLEX√ïES PADR√ÉO', 0)">
        <div class="m-info">
            <h3 class="oswald">FLEX√ïES PADR√ÉO</h3>
            <div class="m-status">[ UNLOCKED ]</div>
        </div>
        <div class="m-icon">üèãÔ∏è‚Äç‚ôÇÔ∏è</div>
    </div>

    <div class="mission-card locked" id="card-diamante" onclick="startMission('FLEX√ïES DIAMANTE', 5)">
        <div class="m-info">
            <h3 class="oswald">FLEX√ïES DIAMANTE</h3>
            <div class="m-status">[ LOCKED - LVL 5 ]</div>
        </div>
        <div class="m-icon">üí™</div>
    </div>

    <div class="mission-card locked" id="card-burpee" onclick="startMission('BURPEE MILITAR', 10)">
        <div class="m-info">
            <h3 class="oswald">BURPEE MILITAR</h3>
            <div class="m-status">[ LOCKED - LVL 10 ]</div>
        </div>
        <div class="m-icon">üî•</div>
    </div>

    <button id="btn-sensor" class="btn-sensor" onclick="toggleMotion()">‚ñ∂ INICIAR RASTREIO DE MOVIMENTO</button>
    <p style="text-align:center; font-size:10px; color:#a0aec0; margin-top:10px;">Ative o rastreio e prenda o celular ao corpo.</p>
</div>

<div id="tab-devo" class="screen">
    <h2 class="section-title oswald">TRENUS (ESP√çRITO)</h2>
    
    <div class="devo-card">
        <h3 class="oswald" style="margin:0; color:var(--neon); font-size:16px;">DEVOCIONAL DI√ÅRIO</h3>
        <div class="devo-text" id="devo-text-area">
            "A disciplina f√≠sica √© proveitosa, mas a piedade para tudo √© proveitosa..." Selecione um tema abaixo para fortalecer sua mente antes do combate di√°rio.
        </div>
    </div>

    <h3 class="oswald" style="font-size: 14px; margin-bottom: 15px;">TEMAS</h3>
    <div class="themes-grid">
        <div class="theme-btn" onclick="setDevo('RESILI√äNCIA', 'Josu√© 1:9 - Seja forte e corajoso! Na calistenia, a dor reconstr√≥i os m√∫sculos. Na vida, as prova√ß√µes constroem o car√°ter. N√£o desista.')">
            <div class="theme-icon">üõ°Ô∏è</div>
            <div class="oswald" style="font-size:12px;">RESILI√äNCIA</div>
        </div>
        <div class="theme-btn" onclick="setDevo('DISCIPLINA', '1 Cor√≠ntios 9:27 - Esmurro meu corpo e o fa√ßo meu escravo. A motiva√ß√£o falha, mas a disciplina militar se mant√©m. Cumpra sua miss√£o.')">
            <div class="theme-icon">‚öîÔ∏è</div>
            <div class="oswald" style="font-size:12px;">DISCIPLINA</div>
        </div>
    </div>

    <h3 class="oswald" style="font-size: 14px; margin-top: 30px; border-top: 1px solid #374151; padding-top:20px;">ACERVO B√çBLICO</h3>
    <select id="bible-books" onchange="loadChapters()"><option>Carregando livros...</option></select>
    <select id="bible-chapters" onchange="fetchVerses()"><option>Cap√≠tulo</option></select>
    <div id="bible-content" class="bible-content">A palavra ser√° carregada aqui...</div>
</div>

<div id="tab-media" class="screen">
    <h2 class="section-title oswald">CENTRAL MULTIM√çDIA</h2>

    <div class="media-player">
        <div class="album-art">üéµ</div>
        <div class="track-title" id="track-name">Nenhuma faixa selecionada</div>
        <div class="track-time">‚ñ∂ PLAYER PRONTO</div>
        
        <audio id="audio-player" style="display:none;" ontimeupdate="updateAudioTime()"></audio>

        <div class="controls">
            <button class="ctrl-btn" onclick="document.getElementById('audio-player').currentTime -= 10">‚è™</button>
            <button class="ctrl-btn" onclick="toggleAudio()" id="play-btn" style="font-size: 30px;">‚ñ∂</button>
            <button class="ctrl-btn" onclick="document.getElementById('audio-player').currentTime += 10">‚è©</button>
        </div>

        <label class="upload-btn" style="display:block; cursor:pointer;">
            <input type="file" id="load-music" accept="audio/*">
            CARREGAR M√öSICA LOCAL
        </label>
    </div>
</div>

<div class="bottom-nav">
    <div class="nav-item active" onclick="switchTab('tab-train', this)">
        <span class="nav-icon">üìã</span>
        TREINOS
    </div>
    <div class="nav-item" onclick="switchTab('tab-devo', this)">
        <span class="nav-icon">üìñ</span>
        B√çBLIA
    </div>
    <div class="nav-item" onclick="switchTab('tab-media', this)">
        <span class="nav-icon">üéµ</span>
        M√öSICA
    </div>
</div>

<script>
    // === ESTADO DO SISTEMA ===
    let level = parseInt(localStorage.getItem('sys_lvl')) || 1;
    let xp = parseInt(localStorage.getItem('sys_xp')) || 0;
    let reps = 0;
    let isTracking = false;
    let lastZ = 0;

    // === INICIALIZA√á√ÉO E HUD ===
    function updateHUD() {
        let rank = level < 5 ? 'E' : level < 10 ? 'D' : level < 20 ? 'C' : 'S';
        document.getElementById('hud-rank').innerText = `RANK ${rank}`;
        document.getElementById('hud-lvl-num').innerText = level.toString().padStart(2, '0');
        document.getElementById('hud-xp-txt').innerText = xp + "%";
        document.getElementById('hud-xp-fill').style.width = xp + "%";
        
        // Atualiza cadeados na aba Treino
        if(level >= 5) {
            let c = document.getElementById('card-diamante');
            c.classList.remove('locked');
            c.querySelector('.m-status').innerText = "[ UNLOCKED ]";
            c.querySelector('.m-status').style.color = "var(--neon)";
        }
        if(level >= 10) {
            let c = document.getElementById('card-burpee');
            c.classList.remove('locked');
            c.querySelector('.m-status').innerText = "[ UNLOCKED ]";
            c.querySelector('.m-status').style.color = "var(--neon)";
        }
    }

    // === L√ìGICA DE NAVEGA√á√ÉO ===
    function switchTab(tabId, btnElement) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        btnElement.classList.add('active');
    }

    // === MISS√ÉO & ACELER√îMETRO ===
    function startMission(name, reqLvl) {
        if(level < reqLvl) {
            alert(`SISTEMA BLOQUEADO: Requer Level ${reqLvl}`);
            return;
        }
        reps = 0;
        document.getElementById('hud-mission-name').innerText = name;
        document.getElementById('hud-reps').innerText = "00";
        window.scrollTo(0,0);
    }

    function toggleMotion() {
        let btn = document.getElementById('btn-sensor');
        if (!isTracking) {
            // Solicitar permiss√£o para iOS se necess√°rio
            if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {
                DeviceMotionEvent.requestPermission().then(state => {
                    if (state === 'granted') startTracking(btn);
                    else alert("Permiss√£o de movimento negada.");
                }).catch(console.error);
            } else {
                startTracking(btn);
            }
        } else {
            stopTracking(btn);
        }
    }

    function startTracking(btn) {
        isTracking = true;
        btn.innerText = "‚èπ PARAR RASTREIO";
        btn.style.background = "#e53e3e"; // Vermelho
        window.addEventListener('devicemotion', motionHandler);
    }

    function stopTracking(btn) {
        isTracking = false;
        btn.innerText = "‚ñ∂ INICIAR RASTREIO DE MOVIMENTO";
        btn.style.background = "#2b6cb0"; // Azul
        window.removeEventListener('devicemotion', motionHandler);
    }

    function motionHandler(event) {
        let z = event.accelerationIncludingGravity.z;
        if (Math.abs(z - lastZ) > 10) { // Limiar de detec√ß√£o
            reps++;
            xp += 2;
            document.getElementById('hud-reps').innerText = reps.toString().padStart(2, '0');
            
            if (xp >= 100) { xp = 0; level++; }
            
            localStorage.setItem('sys_lvl', level);
            localStorage.setItem('sys_xp', xp);
            updateHUD();
        }
        lastZ = z;
    }

    // === DEVOCIONAL E B√çBLIA ===
    function setDevo(title, text) {
        document.getElementById('devo-text-area').innerHTML = `<strong>${title}</strong><br><br>${text}`;
    }

    async function loadBooks() {
        try {
            const res = await fetch('https://www.abibliadigital.com.br/api/books');
            const books = await res.json();
            let html = '<option>Selecione o Livro</option>';
            books.forEach(b => html += `<option value="${b.abbrev.pt}">${b.name}</option>`);
            document.getElementById('bible-books').innerHTML = html;
        } catch(e) { console.log("Erro API B√≠blia"); }
    }

    async function loadChapters() {
        const abbrev = document.getElementById('bible-books').value;
        const res = await fetch(`https://www.abibliadigital.com.br/api/books/${abbrev}`);
        const book = await res.json();
        let html = '<option>Cap√≠tulo</option>';
        for(let i=1; i<=book.chapters; i++) html += `<option value="${i}">${i}</option>`;
        document.getElementById('bible-chapters').innerHTML = html;
    }

    async function fetchVerses() {
        const abbrev = document.getElementById('bible-books').value;
        const chap = document.getElementById('bible-chapters').value;
        document.getElementById('bible-content').innerHTML = "Buscando dados no servidor celestial...";
        const res = await fetch(`https://www.abibliadigital.com.br/api/verses/nvi/${abbrev}/${chap}`);
        const data = await res.json();
        let html = '';
        data.verses.forEach(v => html += `<p><strong>${v.number}</strong> ${v.text}</p>`);
        document.getElementById('bible-content').innerHTML = html;
    }

    // === MULTIM√çDIA ===
    const audioPlayer = document.getElementById('audio-player');
    const playBtn = document.getElementById('play-btn');

    document.getElementById('load-music').addEventListener('change', function(e){
        const file = e.target.files[0];
        if(file) {
            document.getElementById('track-name').innerText = file.name.substring(0, 25) + '...';
            audioPlayer.src = URL.createObjectURL(file);
            audioPlayer.play();
            playBtn.innerText = "‚è∏";
        }
    });

    function toggleAudio() {
        if(!audioPlayer.src) return;
        if(audioPlayer.paused) {
            audioPlayer.play(); playBtn.innerText = "‚è∏";
        } else {
            audioPlayer.pause(); playBtn.innerText = "‚ñ∂";
        }
    }

    // Init
    updateHUD();
    loadBooks();
</script>
</body>
</html>
