<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SYSTEM: SOLO LEVELING - MANUAL MODE</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --neon: #00e5ff; --bg: #050505; --punish: #ff0055; --panel-bg: rgba(0, 15, 30, 0.9); }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Orbitron', sans-serif; overflow: hidden; touch-action: manipulation; }
        
        /* HUD Superior */
        .hud-panel { position: absolute; background: var(--panel-bg); border: 1px solid var(--neon); box-shadow: 0 0 15px rgba(0, 229, 255, 0.3); padding: 15px; z-index: 10; backdrop-filter: blur(5px); }
        #panel-status { top: 20px; left: 20px; width: 180px; }
        #panel-reps { top: 20px; right: 20px; text-align: right; width: 180px; }

        /* Área Central de Toque (Substitui a Câmera) */
        #touch-zone {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 85%; height: 50%; border: 2px double var(--neon);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: radial-gradient(circle, rgba(0, 229, 255, 0.1) 0%, transparent 70%);
            cursor: pointer; transition: 0.1s;
        }
        #touch-zone:active { background: rgba(0, 229, 255, 0.3); transform: translate(-50%, -50%) scale(0.98); }
        #touch-zone h2 { font-size: 12px; color: var(--neon); letter-spacing: 3px; opacity: 0.6; }

        /* Menu e Telas */
        #menu { position: absolute; width: 100%; height: 100%; background: #000; z-index: 100; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .btn-system { background: transparent; border: 1px solid var(--neon); color: var(--neon); padding: 15px; margin: 10px; width: 80%; font-family: 'Orbitron'; text-transform: uppercase; cursor: pointer; }
        
        /* Progressão */
        .xp-container { position: absolute; bottom: 30px; left: 10%; width: 80%; }
        .xp-bar { width: 100%; height: 8px; border: 1px solid var(--neon); background: #000; overflow: hidden; }
        #xp-fill { width: 0%; height: 100%; background: var(--neon); box-shadow: 0 0 10px var(--neon); transition: 0.3s; }
        
        .label { font-size: 10px; color: #888; margin-bottom: 5px; }
        .value { font-size: 24px; font-weight: bold; color: var(--neon); }
    </style>
</head>
<body>

<div id="menu">
    <h1 style="color: var(--neon); margin-bottom: 40px;">SISTEMA ATIVO</h1>
    <div class="hud-panel" style="position: relative; margin-bottom: 20px; width: 70%;">
        <div class="label">STATUS ATUAL</div>
        <div id="menu-lvl" class="value">LVL 01</div>
    </div>
    <button class="btn-system" onclick="start('flexao')">Missão: Flexões</button>
    <button class="btn-system" onclick="start('agachamento')">Missão: Agachamentos</button>
    <button class="btn-system" onclick="resetSystem()" style="color: var(--punish); border-color: var(--punish); margin-top: 50px; font-size: 10px;">Resetar Sistema</button>
</div>

<div id="game-ui" style="display:none;">
    <div id="panel-status" class="hud-panel">
        <div class="label">PLAYER</div>
        <div id="hud-lvl" class="value">LVL 01</div>
    </div>

    <div id="panel-reps" class="hud-panel">
        <div id="mission-name" class="label">MISSÃO</div>
        <div id="count-val" class="value">00</div>
    </div>

    <div id="touch-zone" onclick="doRep()">
        <h2 id="tap-instruction">TOQUE PARA REGISTRAR</h2>
        <div style="font-size: 50px; color: var(--neon); opacity: 0.2;">タップ</div>
    </div>

    <div class="xp-container">
        <div class="label" id="xp-text">XP: 0/100</div>
        <div class="xp-bar"><div id="xp-fill"></div></div>
    </div>
</div>

<script>
    let count = 0;
    let xp = parseInt(localStorage.getItem('xp')) || 0;
    let level = parseInt(localStorage.getItem('lvl')) || 1;

    function speak(t) {
        const s = new SpeechSynthesisUtterance(t);
        s.lang = 'pt-BR';
        window.speechSynthesis.speak(s);
    }

    function updateUI() {
        document.getElementById('menu-lvl').innerText = "LVL " + level.toString().padStart(2, '0');
        document.getElementById('hud-lvl').innerText = "LVL " + level.toString().padStart(2, '0');
        document.getElementById('count-val').innerText = count.toString().padStart(2, '0');
        document.getElementById('xp-fill').style.width = xp + "%";
        document.getElementById('xp-text').innerText = `XP: ${xp}/100`;
        
        localStorage.setItem('xp', xp);
        localStorage.setItem('lvl', level);
    }

    function start(tipo) {
        count = 0;
        document.getElementById('mission-name').innerText = tipo.toUpperCase();
        document.getElementById('menu').style.display = 'none';
        document.getElementById('game-ui').style.display = 'block';
        document.getElementById('tap-instruction').innerText = "TOQUE APÓS CADA " + tipo.toUpperCase();
        updateUI();
        speak("Missão iniciada. Mantenha o ritmo.");
    }

    function doRep() {
        count++;
        xp += 10;
        
        // Efeito visual rápido
        if (navigator.vibrate) navigator.vibrate(20);

        if (xp >= 100) {
            xp = 0;
            level++;
            speak("Level Up! Suas habilidades aumentaram.");
        }
        
        updateUI();
        speak(count);
    }

    function resetSystem() {
        if(confirm("Deseja apagar seu progresso?")) {
            localStorage.clear();
            location.reload();
        }
    }

    window.onload = updateUI;
</script>
</body>
</html>
