<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SYSTEM: SOLO LEVELING ELITE</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --neon: #00e5ff; --bg: #050505; --panel: rgba(0, 15, 30, 0.95); --gold: #ffd700; }
        body { margin: 0; background: var(--bg); color: white; font-family: 'Orbitron', sans-serif; overflow: hidden; }
        
        /* Navegação por Abas */
        .nav-tabs { position: fixed; bottom: 0; width: 100%; display: flex; background: var(--panel); border-top: 1px solid var(--neon); z-index: 100; }
        .tab-btn { flex: 1; padding: 15px; color: #555; text-align: center; font-size: 10px; cursor: pointer; transition: 0.3s; }
        .tab-btn.active { color: var(--neon); background: rgba(0,229,255,0.1); border-top: 2px solid var(--neon); }

        .screen { display: none; height: calc(100vh - 50px); overflow-y: auto; padding: 20px; box-sizing: border-box; }
        .screen.active { display: block; }

        /* HUD & Cards */
        .card { background: var(--panel); border: 1px solid #222; padding: 15px; margin-bottom: 15px; border-radius: 5px; }
        .neon-border { border-color: var(--neon); box-shadow: 0 0 10px rgba(0,229,255,0.2); }
        .rank-tag { color: var(--gold); font-size: 24px; font-weight: bold; }
        
        /* Central Multimídia */
        #music-player { text-align: center; }
        input[type="file"] { display: none; }
        .custom-file-upload { border: 1px solid var(--neon); display: inline-block; padding: 10px; cursor: pointer; font-size: 10px; margin-top: 10px; }

        /* Bíblia & Devocional */
        .devotional-text { font-family: serif; font-style: italic; color: #ccc; line-height: 1.6; font-size: 14px; }

        /* Treino Sensor */
        #sensor-visual { width: 100px; height: 100px; border-radius: 50%; border: 2px solid var(--neon); margin: 20px auto; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
        .sensor-active { background: var(--neon); box-shadow: 0 0 30px var(--neon); }
    </style>
</head>
<body>

<div id="tab-train" class="screen active">
    <div class="card neon-border">
        <div style="display:flex; justify-content:space-between; align-items:center;">
            <div>
                <div style="font-size: 10px; color: var(--neon);">STATUS DO CAÇADOR</div>
                <div id="rank-val" class="rank-tag">E</div>
            </div>
            <div style="text-align:right">
                <div id="lvl-val">LEVEL 01</div>
                <div id="xp-pct" style="font-size: 10px; color: var(--neon);">XP 0%</div>
            </div>
        </div>
    </div>

    <div class="card">
        <div style="color: var(--neon); font-size: 12px; margin-bottom: 10px;">PRESCRIÇÃO CIENTÍFICA</div>
        <div id="routine-desc" style="font-size: 14px;">Carregando rotina...</div>
    </div>

    <div id="sensor-visual">
        <div id="rep-count" style="font-size: 40px; font-weight: bold;">0</div>
    </div>
    <p style="text-align:center; font-size: 9px; color: #666;">COLOQUE O CELULAR NO CHÃO ABAIXO DO PEITO<br>(O sensor de proximidade contará as repetições)</p>
</div>

<div id="tab-bible" class="screen">
    <h2 style="color: var(--gold);">DEVOCIONAL DIÁRIO</h2>
    <div class="card">
        <div id="bible-verse" class="devotional-text">"Pois Deus não nos deu espírito de covardia, mas de poder, de amor e de equilíbrio."</div>
        <div style="margin-top:10px; font-size: 12px; color: var(--neon);">2 Timóteo 1:7</div>
    </div>
    <div class="card">
        <div style="color: var(--neon); font-size: 12px; margin-bottom: 5px;">REFLEXÃO</div>
        <p style="font-size: 13px; color: #aaa;">O treinamento físico é valioso, mas a disciplina espiritual é eterna. Fortaleça sua mente hoje tanto quanto seu corpo.</p>
    </div>
</div>

<div id="tab-media" class="screen">
    <h2>CENTRAL MULTIMÍDIA</h2>
    <div class="card" id="music-player">
        <div id="track-name" style="font-size: 12px; margin-bottom: 10px;">Nenhuma música carregada</div>
        <audio id="audio-ctrl" controls style="width:100%"></audio>
        <label class="custom-file-upload">
            <input type="file" id="load-music" accept="audio/*" multiple/>
            CARREGAR MÚSICAS DO CELULAR
        </label>
    </div>
</div>

<div class="nav-tabs">
    <div class="tab-btn active" onclick="openTab('tab-train', this)">TREINO</div>
    <div class="tab-btn" onclick="openTab('tab-bible', this)">BÍBLIA</div>
    <div class="tab-btn" onclick="openTab('tab-media', this)">MÚSICA</div>
</div>

<script>
    let level = parseInt(localStorage.getItem('sl_lvl')) || 1;
    let xp = parseInt(localStorage.getItem('sl_xp')) || 0;
    let reps = 0;
    let proximityActive = false;

    // Ciência do Treino (Baseado no Rank)
    const routines = {
        E: { name: "Recruta", series: 3, reps: 8, rest: 90 },
        D: { name: "Soldado", series: 4, reps: 12, rest: 60 },
        C: { name: "Comando", series: 5, reps: 15, rest: 45 },
        S: { name: "Monarca", series: 6, reps: 25, rest: 30 }
    };

    function openTab(tabId, btn) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        btn.classList.add('active');
    }

    function speak(t) {
        const s = new SpeechSynthesisUtterance(t);
        s.lang = 'pt-BR';
        window.speechSynthesis.speak(s);
    }

    function updateHUD() {
        let rank = level < 5 ? 'E' : level < 15 ? 'D' : level < 30 ? 'C' : 'S';
        document.getElementById('rank-val').innerText = rank;
        document.getElementById('lvl-val').innerText = "LEVEL " + level.toString().padStart(2, '0');
        document.getElementById('xp-pct').innerText = "XP " + xp + "%";
        
        let r = routines[rank];
        document.getElementById('routine-desc').innerHTML = `
            <strong>Meta:</strong> ${r.series} Séries de ${r.reps} Repetições<br>
            <strong>Descanso:</strong> ${r.rest}s entre séries
        `;

        localStorage.setItem('sl_lvl', level);
        localStorage.setItem('sl_xp', xp);
    }

    // Lógica do Sensor de Proximidade (Auto-Count)
    if ('ProximitySensor' in window) {
        try {
            const sensor = new ProximitySensor({ threshold: 5 });
            sensor.onreading = () => {
                if (sensor.near && !proximityActive) {
                    proximityActive = true;
                    document.getElementById('sensor-visual').classList.add('sensor-active');
                } else if (!sensor.near && proximityActive) {
                    proximityActive = false;
                    document.getElementById('sensor-visual').classList.remove('sensor-active');
                    reps++;
                    xp += 5;
                    if(xp >= 100) { xp = 0; level++; speak("Level Up"); }
                    document.getElementById('rep-count').innerText = reps;
                    speak(reps);
                    updateHUD();
                }
            };
            sensor.start();
        } catch(e) { console.log("Sensor de hardware indisponível"); }
    } else {
        // Fallback para toque se o sensor não for suportado pelo navegador
        document.getElementById('sensor-visual').onclick = () => {
            reps++; xp += 5; updateHUD(); 
            document.getElementById('rep-count').innerText = reps;
            speak(reps);
        };
    }

    // Gerenciador de Música
    document.getElementById('load-music').addEventListener('change', function(e){
        const file = e.target.files[0];
        const url = URL.createObjectURL(file);
        document.getElementById('track-name').innerText = file.name;
        document.getElementById('audio-ctrl').src = url;
        document.getElementById('audio-ctrl').play();
    });

    updateHUD();
</script>
</body>
</html>
